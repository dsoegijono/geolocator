/*
  Geolocator Javascript Lib v.1.2.9
  (c) 2014-2015 Onur Yildirim (onur@cutepilot.com)
  https://github.com/onury/geolocator
  MIT License
*/
(function(){function o(o){return o&&o.Object===Object?o:null}function e(){"use strict";function o(o,e,t){function n(o,e){t&&a.parentNode&&a.parentNode.removeChild(a),"function"==typeof o&&o(e)}var a=document.createElement("script");a.async=!0,a.readyState?a.onreadystatechange=function(o){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,n(e))}:a.onload=function(o){n(e)},a.onerror=function(e){var t="Could not load source at "+(o+"").replace(/\?.*$/,"");n(g,Error(t))},a.src=o,document.getElementsByTagName("head")[0].appendChild(a)}function e(e){function t(){s.__glcb&&delete s.__glcb,google.load("maps",y,{other_params:"",callback:e})}void 0!==window.google&&void 0!==google.maps?e&&e():void 0!==window.google&&void 0!==google.loader?t():(s.__glcb=t,o(f+"?callback=geolocator.__glcb"))}function t(o,e,t){var n,a,c,i=document.getElementById(o);i?(n=new google.maps.Map(i,e),a=new google.maps.Marker({position:e.center,map:n}),c=new google.maps.InfoWindow,c.setContent(t),google.maps.event.addListener(a,"click",function(){c.open(n,a)}),s.location.map={canvas:i,map:n,options:e,marker:a,infoWindow:c}):s.location.map=null}function n(o,e){function t(o,t){t===google.maps.GeocoderStatus.OK&&e&&e(o)}var n=new google.maps.Geocoder;n.geocode({latLng:o},t)}function a(o){if(o&&o.length>0){var e,t,n={},a=o[0].address_components;for(e=0;e<a.length;e+=1)t=a[e],t.types&&t.types.length>0&&(n[t.types[0]]=t.long_name,n[t.types[0]+"_s"]=t.short_name);s.location.formattedAddress=o[0].formatted_address,s.location.address={street:n.route||"",neighborhood:n.neighborhood||"",town:n.sublocality||"",city:n.locality||"",region:n.administrative_area_level_1||"",country:n.country||"",countryCode:n.country_s||"",postalCode:n.postal_code||"",streetNumber:n.street_number||""}}}function c(o){function e(o){a(o);var e=null===s.location.ipGeoSource?14:7,n={zoom:e,center:c,mapTypeId:"roadmap"};t(p,n,o[0].formatted_address),u&&u.call(null,s.location)}var c=new google.maps.LatLng(o.latitude,o.longitude);n(c,e)}function i(o,e){function t(e){var t=o===!0?0:"number"==typeof o?o:-1;t>=0?s.locateByIP(u,g,t,p):g&&g(e)}function n(o){s.location={ipGeoSource:null,coords:o.coords,timestamp:(new Date).getTime()},c(s.location.coords)}function a(o){t(o)}s.location=null,navigator.geolocation?navigator.geolocation.getCurrentPosition(n,a,e):t(Error("geolocation is not supported."))}function l(o,e){switch(o){case 0:s.location={coords:{latitude:e.latitude,longitude:e.longitude},address:{city:e.city,country:e.country_name,countryCode:e.country_code,region:e.region_name}};break;case 1:s.location={coords:{latitude:e.geoplugin_latitude,longitude:e.geoplugin_longitude},address:{city:e.geoplugin_city,country:e.geoplugin_countryName,countryCode:e.geoplugin_countryCode,region:e.geoplugin_regionName}};break;case 2:s.location={coords:{latitude:e.lat,longitude:e.lon},address:{city:e.city,country:"",countryCode:e.country,region:""}}}s.location&&(s.location.coords.accuracy=null,s.location.coords.altitude=null,s.location.coords.altitudeAccuracy=null,s.location.coords.heading=null,s.location.coords.speed=null,s.location.timestamp=(new Date).getTime(),s.location.ipGeoSource=b[o],s.location.ipGeoSource.data=e)}function r(o){function t(){2===m?void 0!==window.Geo&&(l(m,window.Geo),delete window.Geo,n=!0):void 0!==o&&"string"!=typeof o&&(l(m,o),n=!0),n===!0?c(s.location.coords):g&&g(Error(o||"Could not get location."))}var n=!1;s.location=null,delete s.__ipscb,e(t)}function d(e){void 0===e.cbParam||null===e.cbParam||""===e.cbParam?o(e.url,r,!0):o(e.url+"?"+e.cbParam+"=geolocator.__ipscb",void 0,!0)}var u,g,p,m,f="https://www.google.com/jsapi",y="3.23",b=[{url:"//freegeoip.net/json/",cbParam:"callback"},{url:"//www.geoplugin.net/json.gp",cbParam:"jsoncallback"},{url:"//geoiplookup.wikimedia.org/",cbParam:""}],_=1;return{location:null,locate:function(o,t,n,a,c){function l(){i(n,a)}u=o,g=t,p=c,e(l)},locateByIP:function(o,e,t,n){m="number"!=typeof t||0>t||t>=b.length?_:t,u=o,g=e,p=n,s.__ipscb=r,d(b[m])},isPositionError:function(o){return"[object PositionError]"===Object.prototype.toString.call(o)}}}var t={"function":!0,object:!0},n=t[typeof exports]&&exports&&!exports.nodeType?exports:void 0,a=t[typeof module]&&module&&!module.nodeType?module:void 0,c=a&&a.exports===n?n:void 0,i=o(n&&a&&"object"==typeof global&&global),l=o(t[typeof self]&&self),r=o(t[typeof window]&&window),d=o(t[typeof this]&&this),u=i||r!==(d&&d.window)&&r||l||d||Function("return this")(),s=e();(r||l||{}).geolocator=s,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return s}):n&&a?(c&&((a.exports=s).geolocator=s),n.geolocator=s):u.geolocator=s}).call(this);